<!DOCTYPE html>
<html>
  <head>
    <title>Molecular AR</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="styles.css">

    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/jacksonkoh8/AR.js@99bda004452549e8a7576b9e7afc26992aa0104e/aframe/build/aframe-ar.js"></script>
    <script src="gesture-detector.js"></script>
    <script src="gesture-handler.js"></script>
    <script src="sky.js"></script>

    <script>
      window.onload = function () {
        alert("This is the pop up message");
      };

      function showModel(type) {
        // Target BOTH potential model entities
        const dopamine = document.querySelector('#dopamine-model');
        const serotonin = document.querySelector('#serotonin-model');
        const closeBtn = document.querySelector('#close-btn');

        // Hide both first to ensure a clean swap
        dopamine.setAttribute('visible', 'false');
        serotonin.setAttribute('visible', 'false');

        // Show the specific one selected
        if (type === 'dopamine') {
          dopamine.setAttribute('visible', 'true');
        } else if (type === 'serotonin') {
          serotonin.setAttribute('visible', 'true');
        }

        // Show the close button
        closeBtn.style.display = 'inline-block';
      }

      function closeModel() {
        const dopamine = document.querySelector('#dopamine-model');
        const serotonin = document.querySelector('#serotonin-model');
        const closeBtn = document.querySelector('#close-btn');

        dopamine.setAttribute('visible', 'false');
        serotonin.setAttribute('visible', 'false');
        closeBtn.style.display = 'none';
      }
    </script>

    <style>
      /* This styles your menu container */
      #ui-container {
        position: fixed;
        top: 20px;
        width: 100%;
        text-align: center;
        z-index: 1000;
        display: flex;
        justify-content: center;
        gap: 10px;
      }

      .menu-btn {
        padding: 10px 15px;
        background: rgba(255, 255, 255, 0.9);
        border: 2px solid #333;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        font-family: sans-serif;
      }

      #skybtn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
      }
    </style>
  </head>

  <body> 
    <div id="ui-container">
      <button class="menu-btn" onclick="showModel('dopamine')">Dopamine</button>
      <button class="menu-btn" onclick="showModel('serotonin')">Serotonin</button>
      <button class="menu-btn" id="close-btn" style="display:none; background: #ff4d4d; color: white;" onclick="closeModel()">X Close</button>
    </div>

    <div id="skybtn">
      <button class="menu-btn" onclick="skyCTRL()">Hide Background</button>
    </div>

    <a-scene
      arjs="sourceWidth: 1024; sourceHeight: 776; displayWidth: 1024; displayHeight: 776;"
      embedded
      renderer="logarithmicDepthBuffer: true;"
      vr-mode-ui="enabled: false"
      gesture-detector
      loading-screen="enabled: false"
      gltf-model="dracoDecoderPath: https://www.gstatic.com/draco/v1/decoders/;"
      id="scene"
    >
      <a-assets>
        <a-asset-item id="dopamine-obj" src="Dopamine-model.obj"></a-asset-item>
        <a-asset-item id="dopamine-mtl" src="Dopamine-model.mtl"></a-asset-item>
        <a-asset-item id="serotonin-obj" src="serotonin-model.obj"></a-asset-item>
        <a-asset-item id="serotonin-mtl" src="serotonin-model.mtl"></a-asset-item>
      </a-assets>

      <a-marker preset="hiro" raycaster="objects: .clickable" emitevents="true" cursor="fuse: false; rayOrigin: mouse;" id="markerA">
        <a-sky id="sky" color="#C0C0C0" opacity="0"></a-sky> 
        
        <a-entity
          id="dopamine-model"
          visible="false"
          obj-model="obj: #dopamine-obj; mtl: #dopamine-mtl"
          position="0 0 0"
          scale="0.5 0.5 0.5"
          class="clickable"
          gesture-handler>
        </a-entity>

        <a-entity
          id="serotonin-model"
          visible="false"
          obj-model="obj: #serotonin-obj; mtl: #serotonin-mtl"
          position="0 0 0"
          scale="0.5 0.5 0.5"
          class="clickable"
          gesture-handler>
        </a-entity>
      </a-marker>
      
      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>
